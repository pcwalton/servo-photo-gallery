<!DOCTYPE html>
<html>
<head>
<link rel=stylesheet type=text/css href=photos.css></link>
<style id=photo-rules>
.photo {
    width: 240px;
    height: 180px;
}
</style>
</head>
<body>
<main></main>
<footer>
    <div class=footer-box id=count-container>
        <select id=count onchange="reload()">
            <option value=100>100</option>
            <option value=500>500</option>
            <option value=1000>1,000</option>
            <option value=3000>3,000</option>
            <option value=5000 selected>5,000</option>
            <option value=10000>10,000</option>
        </select> photos loaded
    </div>
    <div class=footer-box id=zoom-container>
        <div class="zoom-icon before"></div>
        <input id=zoom-slider type=range min=10 max=500 value=240 oninput="zoom()" onchange="zoom()"></input>
        <div class="zoom-icon after"></div>
    </div>
</footer>
<script>
// xorshift
function Rand() {
    this.x = 3141;
    this.y = 5926;
    this.z = 5358;
    this.w = 9793;
    return this;
}

Rand.prototype.rand = function() {
    var t = this.x ^ (this.x << 11);
    this.x = this.y; this.y = this.z; this.z = this.w;
    this.w = this.w ^ (this.w >> 19) ^ t ^ (t >> 8);
    return this.w;
}

var MAX_PHOTO = 11;

function zoom() {
    var width = document.getElementById('zoom-slider').value;
    var height = width * 3 / 4;
    document.getElementById('photo-rules').innerHTML =
        ".photo { width: " + width + "px; height: " + height + "px; }";
}

function reload() {
    var rng = new Rand();
    var photoCount = document.getElementById('count').value;
    var string = "";
    for (var i = 0; i < photoCount; i += 1000) {
        string += "<div class=photo-divider>";
        for (var j = i; j < Math.min(photoCount, j + 1000); j++) {
            var photoId = rng.rand() % MAX_PHOTO;
            var photo = "photo" + (photoId < 10 ? "0" : "") + photoId + ".jpg";
            string += "<div class=photo style='background-image: url(" + photo + ")'></div>";
        }
        string += "</div>";
    }
    document.getElementsByTagName("main")[0].innerHTML = string;
}

document.getElementById('zoom-slider').value = 240;
document.getElementById('count').value = 5000;
reload();
</script>
</body>
</html>

